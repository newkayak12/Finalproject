<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="food">

	<select id="selectAllFood" resultMap="foodMap">
		SELECT * FROM FOOD JOIN MENU USING (FOOD_SEQ)
	</select>
	
	<select id="selectFoodCategoryMain" resultType="string">
		SELECT * FROM FOOD_CATEGORY ORDER BY FOOD_CATEGORY_MAIN ASC
	</select>
	
	<select id="selectFoodCategorySub" resultType="string">
		SELECT * FROM FOOD_CATEGORY_SUB ORDER BY FOOD_CATEGORY_SUB ASC
	</select>
	
	<insert id="foodInsert" parameterType="com.e_um.model.vo.placeinfo.food.food.Food">
		INSERT INTO FOOD VALUES('FO_'||food_seq.nextval,#{foodCategoryMain},#{foodCategorySub},#{foodName},#{foodContents},#{foodAddr},#{foodCall},#{foodLongitude},#{foodLatitude},#{foodStar},#{foodPrice},#{foodTimeFirst},#{foodTimeLast},#{foodHead},#{foodUrl},#{foodLikeCount})
		<selectKey keyProperty="foodSeq" order="AFTER" resultType="String">
			SELECT FOOD_SEQ.CURRVAL FROM DUAL
		</selectKey>
	</insert>
	
	<insert id="foodMenuInsert" parameterType="com.e_um.model.vo.placeinfo.food.menu.FoodMenu">
			INSERT INTO MENU VALUES('FM_'||food_menu_seq.nextval,#{foodSeq},#{menuName},#{menuPrice},#{menuPhoto})
	</insert>
	
	<select id="selectFood" parameterType="string" resultMap="foodMap">
		SELECT * FROM FOOD JOIN MENU USING(FOOD_SEQ) WHERE FOOD_SEQ = #{foodSeq}
	</select>
	
	<resultMap type="com.e_um.model.vo.placeinfo.food.food.Food"  id="foodMap">
		<id column="food_seq" property="foodSeq"/>
		<result column="food_name" property="foodName"/>
		<result column="food_contents" property="foodContents"/>
		<result column="food_addr" property="foodAddr"/>
		<result column="food_call" property="foodCall"/>
		<result column="food_longitude" property="foodLongitude"/>
		<result column="food_latitude" property="foodLatitude"/>
		<result  column="food_star" property="foodStar"/>
		<result column="food_price" property="foodPrice"/>
		<result column="food_time_first" property="foodTimeFirst"/>
		<result column="food_time_last" property="foodTimeLast"/>
		<result column="food_head" property="foodHead"/>
		<result column="food_url" property="foodUrl"/>
		<result column="food_like_count" property="foodLikeCount"/>
		<result column="food_category_main" property="foodCategoryMain"/>
		<result column="food_category_sub" property="foodCategorySub"/>
		<collection property="menus" ofType="com.e_um.model.vo.placeinfo.food.menu.FoodMenu">
			<id column="food_menu_seq" property="foodMenuSeq"/>
			<result column="food_seq" property="foodSeq"/>
			<result column="menu_name" property="menuName"/>
			<result column="menu_price" property="menuPrice"/>
			<result column="menu_photo" property="menuPhoto"/>
		</collection>
	</resultMap>
	
	<resultMap type="com.e_um.model.vo.placeinfo.food.booking.FoodBooking" id="foodBookingMap">
		<id property="foodBookingSeq" column="food_booking_seq"/>
		<result property="bookingDateDay" column="booking_date_day"/>
		<result property="bookingDateTime" column="booking_date_time"/>
		<result property="bookingHead" column="booking_head"/>
		<result property="bookingContents" column="booking_contents"/>
		<result property="bookingCancelFlag" column="booking_cancel_flag"/>
		<collection property="user" resultMap="userMap"></collection>
		<collection property="food" resultMap="foodMap"></collection>
	</resultMap>
	
	<resultMap type="com.e_um.model.vo.userInfo.user.User" id="userMap">
      <id property="userId" column="user_id"/>
      <result property="userPassword" column="user_password"/>
      <result property="userName" column="user_name"/>
      <result property="userNick" column="user_nick"/>
      <result property="userEmail" column="user_email"/>
      <result property="userAddrBasic" column="user_addr_basic"/>
      <result property="userAddrDetails" column="user_addr_details"/>
      <result property="userAddrZip" column="user_addr_zip"/>
      <result property="userPhone" column="user_phone"/>
      <result property="userRole" column="user_role"/>
      <result property="userDate" column="user_date"/>
      <result property="userGender" column="user_gender"/>
      <result property="userYear" column="user_year"/>
      <result property="userReportCount" column="user_report_count"/>
      <result property="userBlock" column="user_block"/>
      <result property="userExit" column="user_exit"/>
      <result property="profileImageFile" column="profile_image_file"/>
      <result property="profileStatus" column="profile_status"/>
      <collection property="interest" ofType="com.e_um.model.vo.userInfo.interest.Interest">
         <result property="profileInterestName1" column="profile_interest_name1"/>
         <result property="profileInterestName2" column="profile_interest_name2"/>
         <result property="profileInterestName3" column="profile_interest_name3"/>
         <result property="profileInterestName4" column="profile_interest_name4"/>
         <result property="profileInterestName5" column="profile_interest_name5"/>
      </collection>
   </resultMap>
	
	
</mapper>
